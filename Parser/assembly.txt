call_c_closure random_sleep
pop
push i 0
uncache
store stig barrier
push i 0
load __lambda_3
call_closure
store global result
spin
end

define_closure barrierTest 0 1 barrier 
push i 0
uncache
store global sum
push i 0
load __lambda_2
call_closure
pop
load sum
push i 1
lt
jmp_if_zero else_0
end
jmp endif_0
label else_0
push i 0
label endif_0
push i 1
ret_from_closure
define_closure __lambda_2 0 1 barrier 
label iter_start_0
is_iter_at_end barrier
jmp_if_not_zero iter_end_0
push_next_in_stig barrier
store local i
load sum
push i 1
add
pop
jmp iter_start_0
label iter_end_0
push_nil
push i 1
ret_from_closure
define_closure __lambda_3 0 0 
push i 0
load barrierTest
call_closure
push i 1
ret_from_closure
